{% raw %}

# 前端自动化构建

## 1 npm安装配置

npm安装与升级npm是基于Node.js的随同Node.js一起发布，所以要想使用npm，首先要安装Node.js

可以使用如下命令单独更新npm

```shell
npm install npm --global
```

## 2 npm查找和选择包

打开nodejs网站：[nodejs 官网](https://www.npmjs.com/) ，有一个搜索框

## 3 npm 安装删除全局包

### 1. 安装全局包

安装全局包，需要再加上一个 `--global` 选项。 `global` 就是全局的意思，它的简写形式是一个 `-g`.

下面我们在全局范围内安装一个jquery包。

```shell
npm install -g jquery
```

 

### 2. 安装删除全局包

删除全局包，可以使用`npm uninstall -g`命令，例如，下面我们把刚才安装的jquery全局包删除。

```shell
npm uninstall -g jquery
```

## 4 npm 安装删除本地包

###1. 安装本地包

我们也可以在自己的项目里面安装需要的包，这种叫做本地包。安装本地包不需要使用 `-global` 或者 `-g` 参数.

下面我们在桌面上创建一个文件夹 `xxkt-project` , 通过命令行 `cd` 到当前文件夹，然后执行如下命令：

```shell
npm install jquery
```

命令执行完成后，会在当前文件夹生成一个`node_modules`文件夹和一个`package-lock.json`配置文件。jquery就被安装在`node_modules`文件夹中。

可以使用`tree`命令查看文件夹目录结构。

###2. 删除本地包

删除本地包使用如下命令：

```shell
npm uninstall jquery
```

## 5 npm 安装指定版本的包

```shell
npm install vue
```

查看安装的包列表：

```shell
npm list
```

结果如下：

```shell
vue@2.5.16
```

其中@后面的2.5.16就是vue的版本。

如果我们要安装指定版本的包，也可以在包名称后面添加`@`再添加版本号，例如：

```shell
npm install vue@2.3.1
```

## 6 npm 配置文件：package.json

npm 提供了一个 `init` 命令可以帮助我们创建这个 `package.json` 文件.

包含以下内容

- 先是项目名字，默认会使用项目目录的名字
- 版本号，默认是 1.0.0
- 项目的描述
- entry point ，入口
- test command，测试命令
- git 仓库
- keywords 关键词
- author 项目的作者是谁
- license项目的授权方式

典型的package.json文件

```json
{
  "name": "xxkt",
  "version": "1.0.0",
  "description": "编程宝库 npm 教程",
  "main": "index.js",
  "dependencies": {
    "jquery": "^3.3.1",
    "vue": "^2.3.1"
  },
  "devDependencies": {},
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "编程宝库",
    "npm"
  ],
  "author": "编程宝库",
  "license": "ISC"
}
```

## 7 npm 使用 packge.json

2类依赖： dependencies(项目依赖) + devDependencies(开发依赖)

```shell
npm install jquery --save  # 添加项目依赖

npm install babel-cli --save-dev  # 添加开发依赖

npm install # 删除node_modules目录后，用该命令获取package.json中依赖，然后安装库

npm uninstall jquery --save # 删除库
```

## 8 npm更新本地包

```shell
npm info vue # 查看版本
npm outdated vue # 检查更新
npm update # 执行更新
```

## 9 npm/npx/yarn

### 1 yarn和npm区别

yarn 和 npm 都是 node 软件包管理器，

1， yarn: 是同步执行所有任务，提高了性能， 而且如果你上一次安装过软件包，第二个会从缓存中获取，
2， npm: 是按照队列执行每一个package, 每一次都是从网络上下载，也就是说必须要等到当前 package 安装完成之后，才能继续后面的安装

### 2 yarn 和 npm 命令对比

 NPM                               Yarn
npm install                     ==     yarn
npm install vue -g              ==     yarn global add vue
npm install vue --save          ==     yarn add vue
npm install vue --save-dev      ==     yarn add vue --dev
npm uninstall vue --save(-dev)  ==     yarn remove vue
npm unpdate vue --save          ==     yarn upgrade vue

### 3 npm 和 npx 的区别

npm 是 node 软件包的管理器 * npx 是 node 软件包的执行工具  官方文档，从npm@5.2.0 版本开始，npx就和npm捆绑在了一起，可以认为npx是npm 的高级版本，npx 具有更强大的功能

## 10 package-lock.json

锁定安装时的包的版本号，并且需要上传到git，以保证其他人在npm install时大家的依赖能保证一致

原来package.json文件只能锁定大版本，也就是版本号的第一位，并不能锁定后面的小版本，你每次npm install都是拉取的该大版本下的最新的版

```json
"dependencies": {
 "@types/node": "^8.0.33",	//向上标号^是定义了向后（新）兼容依赖
},
```

npm5以前，npm install会下最新版，现在会根据package-lock.json下对应版本。除非强制手工npm install xxx@x.x.x这样设定版本





{% endraw %}

